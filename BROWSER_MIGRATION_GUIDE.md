# ğŸŒ ãƒ–ãƒ©ã‚¦ã‚¶ã§æ‰‹å‹•ãƒ‡ãƒ¼ã‚¿ç§»è¡Œã‚¬ã‚¤ãƒ‰ï¼ˆæœ€ã‚‚ç¢ºå®Ÿï¼‰

CLIã§ã®ãƒ­ã‚°ã‚¤ãƒ³ãŒé›£ã—ã„å ´åˆã€ãƒ–ãƒ©ã‚¦ã‚¶ã§æ‰‹å‹•ç§»è¡Œã™ã‚‹æ–¹ãŒç¢ºå®Ÿã§ã™ã€‚

## ğŸ“‹ ç§»è¡Œã®å…¨ä½“åƒ

1. âœ… ã‚³ãƒ¼ãƒ‰æ›´æ–°ï¼ˆå®Œäº†æ¸ˆã¿ï¼‰
2. â³ æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
3. â³ æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ
4. â³ æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
5. â³ Edge Functionsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤

---

## ã‚¹ãƒ†ãƒƒãƒ—1: æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

### 1-1. æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã

[æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - Table Editor](https://app.supabase.com/project/vnwnevhakhgbbxxlmutx/editor)

### 1-2. å„ãƒ†ãƒ¼ãƒ–ãƒ«ã‚’CSVã§ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ

**é‡è¦ãªé †åºã§å®Ÿè¡Œã—ã¦ãã ã•ã„**:

#### â‘  treatment_categoriesï¼ˆã‚«ãƒ†ã‚´ãƒªãƒ¼ï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `treatment_categories` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `treatment_categories.csv` ã¨ã—ã¦ä¿å­˜

#### â‘¡ treatmentsï¼ˆè¨ºç™‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `treatments` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `treatments.csv` ã¨ã—ã¦ä¿å­˜

#### â‘¢ patientsï¼ˆæ‚£è€…ãƒ‡ãƒ¼ã‚¿ï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `patients` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `patients.csv` ã¨ã—ã¦ä¿å­˜

#### â‘£ appointmentsï¼ˆäºˆç´„ãƒ‡ãƒ¼ã‚¿ï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `appointments` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `appointments.csv` ã¨ã—ã¦ä¿å­˜

#### â‘¤ clinic_schedulesï¼ˆã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `clinic_schedules` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `clinic_schedules.csv` ã¨ã—ã¦ä¿å­˜

#### â‘¥ system_settingsï¼ˆã‚·ã‚¹ãƒ†ãƒ è¨­å®šï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `system_settings` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `system_settings.csv` ã¨ã—ã¦ä¿å­˜

#### â‘¦ booking_time_schedulesï¼ˆäºˆç´„æ™‚é–“è¨­å®šï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `booking_time_schedules` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `booking_time_schedules.csv` ã¨ã—ã¦ä¿å­˜

#### â‘§ special_booking_timesï¼ˆç‰¹åˆ¥äºˆç´„æ™‚é–“ï¼‰
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `special_booking_times` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€Œ...ã€ãƒ¡ãƒ‹ãƒ¥ãƒ¼ â†’ ã€ŒExport to CSVã€
3. ãƒ•ã‚¡ã‚¤ãƒ«å: `special_booking_times.csv` ã¨ã—ã¦ä¿å­˜

---

## ã‚¹ãƒ†ãƒƒãƒ—2: æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆ

### 2-1. æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®SQL Editorã‚’é–‹ã

[æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - SQL Editor](https://app.supabase.com/project/lcexzucpzawxdujmljyo/sql/new)

### 2-2. COMPLETE_DATABASE_SETUP.sqlã‚’å®Ÿè¡Œ

1. SQL Editorã§ã€ŒNew queryã€ã‚’ã‚¯ãƒªãƒƒã‚¯
2. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã® `COMPLETE_DATABASE_SETUP.sql` ã‚’é–‹ã
3. å†…å®¹ã‚’ã™ã¹ã¦ã‚³ãƒ”ãƒ¼
4. SQL Editorã«è²¼ã‚Šä»˜ã‘
5. ã€ŒRunã€ã‚’ã‚¯ãƒªãƒƒã‚¯

**å®Ÿè¡Œçµæœ**: ã™ã¹ã¦ã®ãƒ†ãƒ¼ãƒ–ãƒ«ãŒä½œæˆã•ã‚Œã¾ã™

---

## ã‚¹ãƒ†ãƒƒãƒ—3: æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«ãƒ‡ãƒ¼ã‚¿ã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

### 3-1. æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®Table Editorã‚’é–‹ã

[æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - Table Editor](https://app.supabase.com/project/lcexzucpzawxdujmljyo/editor)

### 3-2. å„ãƒ†ãƒ¼ãƒ–ãƒ«ã«CSVã‚’ã‚¤ãƒ³ãƒãƒ¼ãƒˆ

**é‡è¦: ã“ã®é †åºã§å®Ÿè¡Œã—ã¦ãã ã•ã„**ï¼ˆä¾å­˜é–¢ä¿‚ãŒã‚ã‚‹ãŸã‚ï¼‰

#### â‘  treatment_categories
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `treatment_categories` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `treatment_categories.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘¡ treatments
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `treatments` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `treatments.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘¢ patients
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `patients` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `patients.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘£ appointments
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `appointments` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `appointments.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘¤ clinic_schedules
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `clinic_schedules` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `clinic_schedules.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘¥ system_settings
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `system_settings` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `system_settings.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘¦ booking_time_schedules
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `booking_time_schedules` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `booking_time_schedules.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

#### â‘§ special_booking_times
1. å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼ã§ `special_booking_times` ã‚’ã‚¯ãƒªãƒƒã‚¯
2. å³ä¸Šã®ã€ŒInsertã€â†’ã€ŒImport data from CSVã€
3. `special_booking_times.csv` ã‚’é¸æŠ
4. ã€ŒImportã€ã‚’ã‚¯ãƒªãƒƒã‚¯

---

## ã‚¹ãƒ†ãƒƒãƒ—4: Edge Functionsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤

### 4-1. Supabase CLIã§ãƒ‡ãƒ—ãƒ­ã‚¤

æ–°ã—ã„ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’é–‹ã„ã¦å®Ÿè¡Œï¼š

```powershell
# ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã«æ¥ç¶šï¼ˆãƒ‘ã‚¹ãƒ¯ãƒ¼ãƒ‰å…¥åŠ›ãŒå¿…è¦ãªå ´åˆã‚ã‚Šï¼‰
npx -y supabase link --project-ref lcexzucpzawxdujmljyo

# Edge Functionsã‚’ãƒ‡ãƒ—ãƒ­ã‚¤
npx -y supabase functions deploy send-appointment-email
npx -y supabase functions deploy send-confirmation-email
npx -y supabase functions deploy send-cancellation-email
npx -y supabase functions deploy send-reminder-emails
npx -y supabase functions deploy send-appointment-modification-email
npx -y supabase functions deploy send-payment-confirmation-email
```

### 4-2. ãƒ‡ãƒ—ãƒ­ã‚¤ã®ç¢ºèª

[æ–°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ - Edge Functions](https://app.supabase.com/project/lcexzucpzawxdujmljyo/functions)

å„é–¢æ•°ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã“ã¨ã‚’ç¢ºèª

---

## ã‚¹ãƒ†ãƒƒãƒ—5: Secretsã‚’è¨­å®š

```powershell
# Resend APIã‚­ãƒ¼ã‚’è¨­å®š
npx -y supabase secrets set RESEND_API_KEY=re_xxxxxxxxxxxxx
```

---

## ã‚¹ãƒ†ãƒƒãƒ—6: å‹•ä½œç¢ºèª

```powershell
npm run dev
```

1. http://localhost:5173 ã«ã‚¢ã‚¯ã‚»ã‚¹
2. è¨ºç™‚ãƒ¡ãƒ‹ãƒ¥ãƒ¼ãŒè¡¨ç¤ºã•ã‚Œã‚‹ã‹ç¢ºèª
3. äºˆç´„ã‚’è©¦ã™

---

## ğŸ“ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

**ä»Šã™ãå®Ÿè¡Œ**:

1. [æ—§ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ](https://app.supabase.com/project/vnwnevhakhgbbxxlmutx/editor) ã‚’é–‹ã
2. ä¸Šè¨˜ã®æ‰‹é †ã§CSVã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã‚’é–‹å§‹

ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ãŸã‚‰æ•™ãˆã¦ãã ã•ã„ï¼





